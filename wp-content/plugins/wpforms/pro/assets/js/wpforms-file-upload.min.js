!function t(n,i,a){function s(o,e){if(!i[o]){if(!n[o]){var r="function"==typeof require&&require;if(!e&&r)return r(o,!0);if(d)return d(o,!0);throw new Error("Cannot find module '"+o+"'")}r=i[o]={exports:{}};n[o][0].call(r.exports,function(e){var r=n[o][1][e];return s(r||e)},r,r.exports,t,n,i,a)}return i[o].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,r,o){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(r){var e,o;null===v?(e=function(){for(var e="",r=0;r<x.payloadSize;++r)e+=String.fromCharCode(Math.round(36*Math.random()+64));return e}(),o=new Date,wp.ajax.post({action:"wpforms_file_upload_speed_test",data:e}).then(function(){var e=new Date-o;v=e>=x.maxTime,r()}).fail(function(){v=!0,r()})):setTimeout(r)}function i(e){e.loading<0&&(e.loading=0);var r,o=jQuery(e.element).closest("form"),t=o.find(".wpforms-submit"),n=e.getFilesWithStatus("error"),i=(r=o,function(){r.find(".wpforms-uploading-in-progress-alert").length||r.find(".wpforms-submit-container").before('<div class="wpforms-error-alert wpforms-uploading-in-progress-alert">'+window.wpforms_file_upload.loading_message+"</div>")});0<e.loading||0<n.length?(t.prop("disabled",!0),o.find(".wpforms-submit-overlay").length||(t.parent().addClass("wpforms-submit-overlay-container"),t.parent().append('<div class="wpforms-submit-overlay"></div>'),o.find(".wpforms-submit-overlay").css("width",t.outerWidth()+"px"),o.find(".wpforms-submit-overlay").css("height",t.parent().outerHeight()+"px"),o.find(".wpforms-submit-overlay").on("click",i))):(t.prop("disabled",!1),o.find(".wpforms-submit-overlay").off("click",i),o.find(".wpforms-submit-overlay").remove(),t.parent().removeClass("wpforms-submit-overlay-container"),o.find(".wpforms-uploading-in-progress-alert").length&&o.find(".wpforms-uploading-in-progress-alert").remove())}function n(e){try{return JSON.parse(e)}catch(e){return!1}}function s(e){return 0<e.length}function d(e){return e}function l(e){return e.chunkResponse||e.xhr}function f(e){return"string"==typeof e?e:e.responseText}function p(e){return e.data}function u(e){var r=jQuery(e.element).parents(".wpforms-field-file-upload").find("input[name="+e.dataTransfer.name+"]");r.val((e=e.files,(e=e.map(l).filter(d).map(f).filter(s).map(n).filter(d).map(p)).length?JSON.stringify(e):"")).trigger("input"),void 0!==jQuery.fn.valid&&r.valid()}function m(e,r){var o;e.isErrorNotUploadedDisplayed||((o=document.createElement("span")).innerText=r.toString(),o.setAttribute("data-dz-errormessage",""),e.previewElement.querySelector(".dz-error-message").appendChild(o))}function c(t){return function r(o){o.retries||(o.retries=0),"error"!==o.status&&(wp.ajax.post(jQuery.extend({action:"wpforms_file_chunks_uploaded",form_id:t.dataTransfer.formId,field_id:t.dataTransfer.fieldId,name:o.name},t.options.params.call(t,null,null,{file:o,index:0}))).then(function(e){o.chunkResponse=JSON.stringify({data:e}),t.loading=t.loading||0,t.loading--,i(t),u(t)}).fail(function(e){e.responseJSON&&!1===e.responseJSON.success&&e.responseJSON.data?m(o,e.responseJSON.data):(o.retries++,3!==o.retries?setTimeout(function(){r(o)},5e3*o.retries):m(o,window.wpforms_file_upload.errors.file_not_uploaded))}),t.processQueue())}}function w(e){setTimeout(function(){e.files.filter(function(e){return e.accepted}).length>=e.options.maxFiles?e.element.querySelector(".dz-message").classList.add("hide"):e.element.querySelector(".dz-message").classList.remove("hide")},0)}function _(n){return function(e){var r,o;e.size>=n.dataTransfer.postMaxSize?(r=e,o=n,setTimeout(function(){var e;r.size>=o.dataTransfer.postMaxSize&&(e=window.wpforms_file_upload.errors.post_max_size,r.isErrorNotUploadedDisplayed||(r.isErrorNotUploadedDisplayed=!0,e=window.wpforms_file_upload.errors.file_not_uploaded+" "+e,m(r,e)))},1)):t(function(){var o,t;o=n,t=e,wp.ajax.post(jQuery.extend({action:"wpforms_upload_chunk_init",form_id:o.dataTransfer.formId,field_id:o.dataTransfer.fieldId,name:t.name,slow:v},o.options.params.call(o,null,null,{file:t,index:0}))).then(function(e){for(var r in e)o.options[r]=e[r];e.dzchunksize&&(o.options.chunkSize=parseInt(e.dzchunksize,10),t.upload.totalChunkCount=Math.ceil(t.size/o.options.chunkSize)),o.processQueue()}).fail(function(e){var r;t.status="error",t.xhr||(r=window.wpforms_file_upload.errors.file_not_uploaded,e.statusText&&(r+=" "+e.statusText+"."),t.previewElement.classList.add("dz-processing","dz-error","dz-complete"),m(t,r)),o.processQueue()})}),n.loading=n.loading||0,n.loading++,i(n),w(n)}}function g(o){return function(e){w(o);var r=e.chunkResponse||(e.xhr||{}).responseText;!r||(e=n(r))&&e.data&&e.data.file&&(r=e.data.file,e=o,wp.ajax.post({action:"wpforms_remove_file",file:r,form_id:e.dataTransfer.formId,field_id:e.dataTransfer.fieldId})),u(o),o.loading=o.loading||0,o.loading--,i(o)}}function y(e){var t,r=parseInt(e.dataset.formId,10),o=parseInt(e.dataset.fieldId,10)||0,n=parseInt(e.dataset.maxFileNumber,10),i=e.dataset.extensions.split(",").map(function(e){return"."+e}).join(","),n=new window.Dropzone(e,{url:window.wpforms_file_upload.url,addRemoveLinks:!0,chunking:!0,forceChunking:!0,retryChunks:!0,chunkSize:parseInt(e.dataset.fileChunkSize,10),paramName:e.dataset.inputName,parallelChunkUploads:!!(e.dataset.parallelUploads||"").match(/^true$/i),parallelUploads:parseInt(e.dataset.maxParallelUploads,10),autoProcessQueue:!1,maxFilesize:(parseInt(e.dataset.maxSize,10)/1048576).toFixed(2),maxFiles:n,acceptedFiles:i,dictMaxFilesExceeded:window.wpforms_file_upload.errors.file_limit.replace("{fileLimit}",n),dictInvalidFileType:window.wpforms_file_upload.errors.file_extension,dictFileTooBig:window.wpforms_file_upload.errors.file_size});return n.dataTransfer={postMaxSize:e.dataset.maxSize,name:e.dataset.inputName,formId:r,fieldId:o},n.on("sending",(t={action:"wpforms_upload_chunk",form_id:r,field_id:o},function(e,r,o){if(e.size>this.dataTransfer.postMaxSize)return r.send=function(){},e.accepted=!1,e.processing=!1,e.status="rejected",e.previewElement.classList.add("dz-error"),void e.previewElement.classList.add("dz-complete");Object.keys(t).forEach(function(e){o.append(e,t[e])})})),n.on("addedfile",_(n)),n.on("removedfile",g(n)),n.on("complete",c(n)),n.on("error",function(e,r){e.isErrorNotUploadedDisplayed||("object"===a(r)&&(r=Object.prototype.hasOwnProperty.call(r,"data")&&"string"==typeof r.data?r.data:""),r="0"!==r?r:"",e.isErrorNotUploadedDisplayed=!0,e.previewElement.querySelectorAll("[data-dz-errormessage]")[0].textContent=window.wpforms_file_upload.errors.file_not_uploaded+" "+r)}),n}function h(){window.wpforms=window.wpforms||{},window.wpforms.dropzones=[].slice.call(document.querySelectorAll(".wpforms-uploader")).map(y)}var v,x,z;v=null,x={maxTime:3e3,payloadSize:102400},(z={init:function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()}}).init(),window.wpformsModernFileUpload=z},{}]},{},[1]);